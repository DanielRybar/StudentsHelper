<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="StudentsHelper.Views.NotesPage"
             xmlns:toolkit="http://schemas.microsoft.com/dotnet/2022/maui/toolkit"
             Title="Poznámkový blok">

    <ScrollView x:Name="MainScrollView">
        <CollectionView ItemsSource="{Binding Notes}" SelectionMode="None" SelectedItem="{Binding SelectedNote}">
            <CollectionView.ItemsLayout>
                <GridItemsLayout Orientation="Vertical" Span="2" />
            </CollectionView.ItemsLayout>
            <CollectionView.EmptyView>
                <Label Text="Žádné poznámky nejsou k dispozici." Style="{StaticResource CenteredLabel}" />
            </CollectionView.EmptyView>
            <CollectionView.ItemTemplate>
                <DataTemplate>
                    <Grid Margin="15">
                        <Grid.Behaviors>
                            <toolkit:TouchBehavior 
                                    LongPressCompleted="LongPress_RemoveItem" 
                                    LongPressDuration="120" />
                        </Grid.Behaviors>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="*" />
                            <RowDefinition Height="*" />
                        </Grid.RowDefinitions>
                        <Border 
                                BackgroundColor="{AppThemeBinding Light={StaticResource MainHelperColorLight}, Dark={StaticResource Gray600}}" 
                                HeightRequest="215" 
                                Stroke="{AppThemeBinding Light={StaticResource Black}, Dark={StaticResource White}}" 
                                StrokeThickness="0.5">
                            <Border.StrokeShape>
                                <RoundRectangle CornerRadius="10,10,10,10" />
                            </Border.StrokeShape>
                            <Label Text="{Binding Content}" Margin="8" />
                        </Border>
                        <VerticalStackLayout Grid.Row="1" Padding="0,5,0,0">
                            <Label Text="{Binding Title}" Style="{StaticResource CenteredLabel}" FontAttributes="Bold" />
                            <Label Text="{Binding Path=Date, StringFormat='{}{0:d. M. yyyy}'}" Style="{StaticResource CenteredLabel}" TextColor="{StaticResource Gray400}" />
                        </VerticalStackLayout>
                    </Grid>
                </DataTemplate>
            </CollectionView.ItemTemplate>
        </CollectionView>
    </ScrollView>
</ContentPage>